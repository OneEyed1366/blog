<!doctype html><html lang=ru><head><title>Въетнамские флэшбэки: Девичья память у React'а (и немножко DotNotation) ::</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Немного рассуждений насчет особенностей разработки на React'е (шутейки прилагаются)"><meta name=keywords content="react,reactjs,dot-notation,memo,async"><meta name=robots content="noodp"><link rel=canonical href=https://oneeyed1366.github.io/blog/posts/2022-10-12-react-interviews-1/><link rel=stylesheet href=https://oneeyed1366.github.io/blog/assets/style.css><link rel=stylesheet href=https://oneeyed1366.github.io/blog/assets/blue.css><link rel=apple-touch-icon href=https://oneeyed1366.github.io/blog/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://oneeyed1366.github.io/blog/img/favicon/blue.png><meta name=twitter:card content="summary"><meta property="og:locale" content="ru"><meta property="og:type" content="article"><meta property="og:title" content="Въетнамские флэшбэки: Девичья память у React'а (и немножко DotNotation)"><meta property="og:description" content="Немного рассуждений насчет особенностей разработки на React'е (шутейки прилагаются)"><meta property="og:url" content="https://oneeyed1366.github.io/blog/posts/2022-10-12-react-interviews-1/"><meta property="og:site_name" content><meta property="og:image" content="https://oneeyed1366.github.io/blog/img/favicon/blue.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2022-10-12 14:45:00 +0300 +0300"></head><body class=blue><div class="container headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=https://oneeyed1366.github.io/blog/posts><div class=logo>pseudo::Blog</div></a></div><div class=menu-trigger>Меню</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://oneeyed1366.github.io/blog/about/blog>О блоге</a></li><li><a href=https://oneeyed1366.github.io/blog/about/me>Обо мне</a></li><ul class=menu__sub-inner><li class=menu__sub-inner-more-trigger>Раскрыть меню ▾</li><ul class="menu__sub-inner-more hidden"><li><a href=https://oneeyed1366.github.io/blog/tags>Список тегов</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://oneeyed1366.github.io/blog/about/blog>О блоге</a></li><li><a href=https://oneeyed1366.github.io/blog/about/me>Обо мне</a></li><li><a href=https://oneeyed1366.github.io/blog/tags>Список тегов</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://oneeyed1366.github.io/blog/posts/2022-10-12-react-interviews-1/>Въетнамские флэшбэки: Девичья память у React&rsquo;а (и немножко DotNotation)</a></h1><div class=post-meta><span class=post-date>2022-10-12</span>
<span class=post-reading-time>:: ~6 минут чтения (1100 слов)</span></div><span class=post-tags>#<a href=https://oneeyed1366.github.io/blog/tags/study/>study</a>&nbsp;
#<a href=https://oneeyed1366.github.io/blog/tags/javascript/>JavaScript</a>&nbsp;
#<a href=https://oneeyed1366.github.io/blog/tags/react/>react</a>&nbsp;
#<a href=https://oneeyed1366.github.io/blog/tags/async/>async</a>&nbsp;
#<a href=https://oneeyed1366.github.io/blog/tags/web/>web</a>&nbsp;</span>
<img src=/blog/posts/2022-10-12-react-interviews-1/cover.webp class=post-cover alt="Въетнамские флэшбэки: Девичья память у React'а (и немножко DotNotation)" title="Cover Image"><div class=table-of-contents><h2>Оглавление</h2><nav id=TableOfContents><ul><li><a href=#оффтоп>Оффтоп</a></li><li><a href=#про-что-поговорим>Про что поговорим?</a></li><li><a href=#шта-ёптимизация-0_o>Шта? &lsquo;ЁПТИМИЗАЦИЯ&rsquo;???? 0_o</a></li><li><a href=#спектакль-в-2-действиях>Спектакль в 2 действиях</a></li><li><a href=#код-в-студию>Код в студию!</a><ul><li><a href=#нифига-не-понятно-но-уже-чутка-интересно-_>Нифига не понятно, но уже чутка интересно ^_^</a></li><li><a href=#и-всё-таки-про-мемоизацию>И всё-таки, про мемоизацию&mldr;</a></li></ul></li><li><a href=#вместо-заключения>Вместо заключения</a></li></ul></nav></div><div class=post-content><div><hr><h2 id=оффтоп>Оффтоп
<a href=#оффтоп class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Крутые-модные-молодежные <em>Svelte&rsquo;ы</em>, <em>Solid&rsquo;ы</em>, <em>Qwik&rsquo;и</em> и прочее
сегодня не рассматриваем, ибо каждый из них топит за свою идеологию и способ
работы.</p><p>Мы тут сегодня про &ldquo;старпёров&rdquo;
(<em>слышит голос вдалеке</em>: &ldquo;Ма, неси таблетки, деда снова накрыло&rdquo;)</p><hr><h2 id=про-что-поговорим>Про что поговорим?
<a href=#про-что-поговорим class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Про <code>ЁПТИМИЗАЦИЮ</code>
(автор хотел, правда хотел написать правильно, но не сдержался)</p><h2 id=шта-ёптимизация-0_o>Шта? &lsquo;ЁПТИМИЗАЦИЯ&rsquo;???? 0_o
<a href=#шта-ёптимизация-0_o class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Ага, именно так, и именно через &ldquo;ё&rdquo;, ибо хоть
<code>одна из</code> главных <code>"фишек" React'а</code> по сравнению с <em>Angular</em> & <em>Vue</em>,
<code>это возможность</code> достаточно <code>тонко управлять процессом рендеринга</code>
UI в Web-Приложении, но по опыту выходит примерно вот как:</p><p>Покуда не &ldquo;съел на этом собаку&rdquo;, можно не раз и ДАЛЕКО не два выстрелить себе
в колено
<del>хотя не, о чём это я.
Тут жеж все "тру-JS-developer'ы", а не "framework'щики" какие-то, как я (плачет)</del></p><hr><p>(Подумав, клеит на React ярлычок &ldquo;Fedora&rdquo;, на Vue - &ldquo;MacOSX Mountain Lion&rdquo;,
а на Angular - &ldquo;Windows 10 for Business&rdquo;)</p><h2 id=спектакль-в-2-действиях>Спектакль в 2 действиях
<a href=#спектакль-в-2-действиях class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Давайте представим, что бизнес врывается с ноги в dev-team чат, и такой:</p><ul><li>(Б - Бизнес) НАМ нужен ДАШБОРД!</li><li>(Р - Какой-то разраб) Ну ок, нужен и нужен. (косит под дурака) Мы-то тут причём??</li><li>(Л - ТехЛид) А накиньте контекста: что хотите показывать, для кого делаем, что по эстимейтам, &mldr;?</li><li>(Б) Большой ДАШБОРД! Чтобы там как только мы в админке что-то поменяли, сразу
рисовалось тут! И чтобы графики моментально были! Столбчатые! Нет, даже Ленточные!
Даже оба сразу, и чтобы не лагало! Вообще! Сделаете???</li><li>(Л) Ну, в принципе, понятно.
Давайте соберемся на созвон, обсудим возможные риски и приоритеты
в соответствии с уже имеющимися задачами.</li><li>(Б) ОК! Завтра, в течение дня!</li><li>(Л) Ок.</li></ul><p><em>Бизнес уходит, просыпается &ldquo;мафиозный&rdquo; dev-team</em></p><ul><li>(Л) Народ, вангую, что нас припашут ваять аналог AgGrid, но чисто свой,
и чтобы с плюшками.</li><li>(Р) А в чём проблема взять AgGrid?</li><li>(Л) Скорее всего, в лицензии, ибо тут бизнес, возможно, захочет собирать
стату по какому-то внутреннему проекту, у которого бюджета - что кот наплакал.
Ну или просто показать CEO с СТО, за что мы свой хлеб едим. Андрюха?</li><li>(А - Андрюха) (отвлекается от просмотра боя в Dear Or Alive: Paradise) А??</li><li>(Л) Короче, скорее всего в тебя прилетит таска: сваять таблицу, пока просто -
без графиков. Так, чтобы там бодро рисовалось, но чтобы не выжирало батарейку
у ноута в ноль за полминуты. Прям супер производительность пока не нужна, но лучше на начальном
этапе потратить чутка времени на оптимизацию. Потянешь?</li><li>(Р) ОптЕмизацию</li><li>(Л) Ага, спс. Кстати, как там тесты? Написал?</li><li>(Р) (исчез из-за &ldquo;внезапно&rdquo; появившихся проблем с сетью)</li><li>(Л) Так, Андрюх - ты пока поизучай доку по рендерингу реакта, и сделай прототип.
Ну, допустим, с 2000 строк. Чисто &ldquo;Hello, world!&rdquo; в каждой.
Если что - пингуй, я подскажу</li><li>(А) (кивает, но вообще ни в зуб ногой, чё от него хотят, ибо всю ночь гонял в &ldquo;танки&rdquo;)
Ага, принял. Сделаю</li><li>(Л) Ну и ладушки. Поехали</li></ul><h2 id=код-в-студию>Код в студию!
<a href=#код-в-студию class=hanchor arialabel=Anchor>&#8983;</a></h2><p>А теперь давайте немного о суровом, кодерском.</p><p>Допустим, условный &ldquo;Андрюха&rdquo; проспался, и прямо перед дейликом накидал
что-то подобное:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#75715e>// types/table.d.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>declare</span> <span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>NDataTable</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IDataTable</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>columng</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rows</span>: <span style=color:#66d9ef>string</span>[];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>NDataTable</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>AppTypes</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#75715e>// TableComponent/index.d.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>HTMLAttributes</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IProps</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Partial</span>&lt;<span style=color:#f92672>HTMLAttributes</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>HTMLDivElement</span>&gt;<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>header</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>data</span>: <span style=color:#66d9ef>AppTypes.IDataTable</span>[];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#75715e>// TableComponent/index.tsx
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>memo</span>, <span style=color:#66d9ef>async</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>IProps</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;.&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>TableComponent</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>header</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> [],
</span></span><span style=display:flex><span>  ...<span style=color:#a6e22e>divAttrs</span>
</span></span><span style=display:flex><span>}<span style=color:#f92672>:</span> <span style=color:#a6e22e>Readonly</span>&lt;<span style=color:#f92672>IProps</span>&gt;) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>computedTableColumnRows</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useCallback</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rows</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>rows</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>row</span>, <span style=color:#a6e22e>idx</span>) <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;table__body__column__row&#34;</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>idx</span><span style=color:#e6db74>}</span><span style=color:#e6db74>-row`</span>}&gt;
</span></span><span style=display:flex><span>          {<span style=color:#a6e22e>row</span>}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      ));
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>data</span>]
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>computedTableBody</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useMemo</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;table__body__no-data&#34;</span>&gt;<span style=color:#a6e22e>No</span> <span style=color:#a6e22e>Data</span>&lt;/<span style=color:#f92672>div</span>&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>      &lt;&gt;
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>item</span> <span style=color:#f92672>=&gt;</span> (
</span></span><span style=display:flex><span>          &lt;&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;table__body__column__header&#34;</span>&gt;{<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>column</span>}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>            {<span style=color:#a6e22e>computedTableColumnRows</span>(<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>rows</span>)}
</span></span><span style=display:flex><span>          &lt;/&gt;
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>      &lt;/&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }, [<span style=color:#a6e22e>data</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> {<span style=color:#a6e22e>...divAttrs</span>}&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;table__header&#34;</span>&gt;{<span style=color:#a6e22e>header</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;Default table name&#34;</span>}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;table__body&#34;</span>&gt;{<span style=color:#a6e22e>computedTableBody</span>}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>TableComponent</span>.<span style=color:#a6e22e>Variants</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Memoized</span>: <span style=color:#66d9ef>memo</span>(<span style=color:#a6e22e>TableComponent</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Async</span>: <span style=color:#66d9ef>async</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#34;.&#34;</span>)),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>AsyncMemoized</span>: <span style=color:#66d9ef>memo</span>(<span style=color:#66d9ef>async</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#34;.&#34;</span>)))
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>TableComponent</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#75715e>// HomePage/index.tsx
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useState</span>, <span style=color:#a6e22e>useEffect</span>, <span style=color:#a6e22e>Dispatch</span>, <span style=color:#a6e22e>SetStateAction</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>rows</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>500</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#34;Hello, Data Table World!&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>_mockDataTable</span>: <span style=color:#66d9ef>AppTypes.IDataTable</span>[] <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>5</span>).<span style=color:#a6e22e>fill</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Some column header&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rows</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>HomePage</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>JSX</span>.<span style=color:#a6e22e>Element</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>setData</span>]<span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Record</span>&lt;<span style=color:#f92672>String</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>unknown</span>&gt;,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Dispatch</span>&lt;<span style=color:#f92672>SetStateAction</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>Record</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>string</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>unknown</span>&gt;<span style=color:#f92672>&gt;&gt;</span>
</span></span><span style=display:flex><span>  ] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>// TODO Better move to separate hook
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>useEffect</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>abort</span>, <span style=color:#a6e22e>signal</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AbortContoller</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>REACT_APP_API_URL</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/some-endpoint`</span>, { <span style=color:#a6e22e>signal</span> })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>data</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>error</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>abort</span>();
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>SomeParentComponent</span> <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>data</span>}&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>TableComponent</span> <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>_mockDataTable</span>} /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>SomeParentComponent</span>&gt;
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=нифига-не-понятно-но-уже-чутка-интересно-_>Нифига не понятно, но уже чутка интересно ^_^
<a href=#нифига-не-понятно-но-уже-чутка-интересно-_ class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Ладно-ладно, сек. Ща всё расскажу и покажу. Начнем с &ldquo;фишечек&rdquo;, а точнее - с хуков.</p><p><code>useMemo</code>|<code>useCallback</code>
внутри компонента &ldquo;TableComponent.tsx&rdquo;
<code>"наблюдают" за необходимыми им значениями, и запускают перерисовку</code>
только в 2 случаях:</p><ul><li>ЕСЛИ изменились значения у наблюдаемых в каждом конкретном хуке полей
<del>надеюсь вы знаете, что объекты сюда класть почти бессмысленно?</del></li><li>ЕСЛИ будет будет перерисован РОДИТЕЛЬСКИЙ (SomeParentComponent) компонент</li></ul><p>Собсна, резко и дерзко проникаем в вашу Любимую
<del>IDE, ребзи, IDE!. Надо работу работать, а не вот это вот всё</del>
,
и видим следующее:</p><h4 id=оффтоп-1>Оффтоп
<a href=#оффтоп-1 class=hanchor arialabel=Anchor>&#8983;</a></h4><hr><p>Что это?
<code>Это</code> просто <code>один из способов добавления новых свойств компоненту, в простонародье - DotNotation</code>.
Не каждому зайдет, но я, как только распробовал, влюбился
(ибо в больших проектах, простите, за***шься бегать по 20+ файлам,
дабы проверить - это Асинхронный, Мемоизированный, или еще какой-то вариант Компонента.
Тут, на мой вкус, нагляднее: <code>&lt;TableComponent.Memoized /></code> | <code>&lt;TableComponent.Async /></code>
или вообще &ldquo;чистый&rdquo; <code>&lt;TableComponent /></code>. У - Удобно).</p><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#a6e22e>TableComponent</span>.<span style=color:#a6e22e>Variants</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Memoized</span>: <span style=color:#66d9ef>memo</span>(<span style=color:#a6e22e>TableComponent</span>),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Async</span>: <span style=color:#66d9ef>async</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#34;.&#34;</span>)),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>AsyncMemoized</span>: <span style=color:#66d9ef>memo</span>(<span style=color:#66d9ef>async</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#34;.&#34;</span>)))
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Итак, что тут интересного? <code>Поля "Memoized"</code> и, может, <code>"AsyncMemoized"</code>.</p><p>Давайте чисто &ldquo;по верхам&rdquo;:
&ldquo;memo&rdquo; заставляет React проводить глубокое сравнение свойств компонента,
предотвращая излишние перерисовки. (Закрывает наше 2 ИЛИ)</p><p>Пока забудем про
<a href=https://attardi.org/why-we-memo-all-the-things/ target=_blank rel=noopener>кучу нюансов</a>
,
ибо на текущем этапе это позволит нам сделать главное:</p><p>Вообще &ldquo;на изи&rdquo; пролететь код-ревью (А вы о чём подумали? 0_o)</p><h3 id=и-всё-таки-про-мемоизацию>И всё-таки, про мемоизацию&mldr;
<a href=#и-всё-таки-про-мемоизацию class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Так, как только прошли код-ревью, давайте вернемся &ldquo;к нашим баранам&rdquo;, а точнее:
к перерисовке при изменении родителя ("&lt;SomeParentComponent />")</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#75715e>// HomePage/index.tsx
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>SomeParentComponent</span> <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>data</span>}&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>TableComponent.Memoized</span> <span style=color:#a6e22e>data</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>_mockDataTable</span>} /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>SomeParentComponent</span>&gt;
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>Таким нехитрым приёмом, вы с какой-то степенью уверенности сможете сказать:
&ldquo;Я сделяль!&rdquo;, и вам даже не будет стыдно
<del>но это не точно</del></p><p>Причина такой самоуверенности в том, что, как бы, мы выполнили задание лида:</p><ul><li>Таблица есть? Есть</li><li>+\- 2000 строк в ней есть? Ну, если считать с колонками, то да, есть!</li><li>Тут есть какая-то базовая оптимизация? Есть</li><li>Батарейку при текущем решении мы поберегли? Ну, не сказать, что прям сильно, но
да, вполне</li></ul><h2 id=вместо-заключения>Вместо заключения
<a href=#вместо-заключения class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Текущий пост не преследовал цели быть &ldquo;супер-мега-всеобъемлющим&rdquo; руководством
по оптимизации компонентов.</p><p>Скорее, это был около рабочий пример из давнего-давнего проекта, на котором
хотелось показать возможные решения не всегда &ldquo;подсвечиваемых&rdquo; проблем,
которые возникают при разработке на React&rsquo;е
(Да-да, Vue - я на тебя смотрю. Готовься, ты следующий)</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Ждут прочтения</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://oneeyed1366.github.io/blog/posts/2022-10-10-js-interviews-1/><span class=button__text>Мозги на прокачку: безопасники, XSS и при чем тут формочки</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://oneeyed1366.github.io/blog/assets/main.js></script>
<script src=https://oneeyed1366.github.io/blog/assets/prism.js></script>
<script src=https://oneeyed1366.github.io/blog/assets/languageSelector.js></script></div></body></html>